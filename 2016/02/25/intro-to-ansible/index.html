<!DOCTYPE html>
<html lang="en-us">
<head>
    <title>Intro to Ansible &middot; Eric Rosenberg</title>
    <meta name="generator" content="Hugo 0.15" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Eric Rosenberg">
    
      <meta name="description" content="Getting started with Ansible.">
    
    
    <link rel="icon" href="http://www.yourdomain.com/favicon.ico">
    <link rel="apple-touch-icon" href="http://www.yourdomain.com/apple-touch-icon.png" />
    <link rel="stylesheet" href="http://www.yourdomain.com/css/style.css">
    <link rel="stylesheet" href="http://www.yourdomain.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://www.yourdomain.com/css/monokai.css">
    <link rel="stylesheet" href="http://www.yourdomain.com/fancybox/jquery.fancybox.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <meta property="og:title" content="Intro to Ansible" />
<meta property="og:description" content="Getting started with Ansible." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.yourdomain.com/2016/02/25/intro-to-ansible" />


<meta property="og:updated_time" content="2016-02-25T17:32:58-06:00"/>










    
    
<meta itemprop="name" content="Intro to Ansible">
<meta itemprop="description" content="Getting started with Ansible.">


<meta itemprop="dateModified" content="2016-02-25T17:32:58-06:00" />
<meta itemprop="wordCount" content="761">



<meta itemprop="keywords" content="orchestration,web,ansible,hugo," />

    

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:title" content="Intro to Ansible"/>
<meta name="twitter:description" content="Getting started with Ansible."/>



</head>
<body>
<div class="container">


<div id="container">
	<header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="http://www.yourdomain.com/" id="logo">
        
        <span class="site-title">Eric Rosenberg</span>
      </a>
      <nav id="main-nav">
          
          
          <a class="main-nav-link" href="http://www.yourdomain.com/">Home</a>
          
          
          
          
          
          

          

          
          
          
          
          <a class="main-nav-link" href="http://www.yourdomain.com/tags/">Tags</a>
          
          
          
          <a class="main-nav-link" href="http://www.yourdomain.com/categories/">Categories</a>
          
          
      </nav>
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="http://www.yourdomain.com/images/avatar.png"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
              <input type="search" name="q" results="0" class="search-form-input" placeholder="Search">
              <button type="submit" class="search-form-submit">
              </button>
              <input type="hidden" name="q" value="site:http://www.yourdomain.com/">
         </form>
        </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          
          
          <td><a class="main-nav-link" href="http://www.yourdomain.com/">Home</a></td>
          
          
          
          
          
          

          

          
          
          
          
          <td><a class="main-nav-link" href="http://www.yourdomain.com/tags/">Tags</a></td>
          
          
          
          <td><a class="main-nav-link" href="http://www.yourdomain.com/categories/">Categories</a></td>
          
          
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" results="0" class="search-form-input" placeholder="Search">
          <input type="hidden" name="q" value="site:http://www.yourdomain.com/">
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>

   	
   	<div class="outer">
	    <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="http://www.yourdomain.com/images/avatar.png">
      <h2 id="name">Eric Rosenberg</h2>
      <h3 id="title">Computer Scientist - Student</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Champaign, IL</span>
      
          <a id="follow" href="https://github.com/ehaydenr">
              Follow
          </a>
      
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        3
        <span>Posts</span>
      </div>
      <div class="article-info-block">
        
          2
          
        <span>
            Tags
        </span>
      </div>
    </div>
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
<td><a href="//github.com/ehaydenr" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>



































<td><a href="//linkedin.com/in/eric-rosenberg-10901887" target="_blank" title="LinkedIn"><i class="fa fa-linkedin"></i></a></td>





<td><a href="//stackoverflow.com/users/ehaydenr" target="_blank" title="Stack Overflow"><i class="fa fa-stackoverflow"></i></a></td>









<td><a href="//facebook.com/ehaydenr" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></td>




          <td><a href="" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></td>
        </tr>
      </table>
    </div>
  </div>
</aside>

	    <section id="main">
    <article id="page-undefined" class="article article-type-page" itemscope="" itemprop="blogPost">
        <div class="article-inner">
            
                
                <img src="http://www.yourdomain.com/banners/ansible-logo.png" class="article-banner">
                
            

            <header class="article-header">
    <a href="http://www.yourdomain.com/2016/02/25/intro-to-ansible">
    <h1 class="article-title" itemprop="name">
        Intro to Ansible
    </h1>
    </a>
    <div class="article-meta">
        <div class="article-date">
            <i class="fa fa-calendar"></i>
            <time datetime="2016-02-25 17:32:58 -0600 CST" itemprop="datePublished">2016-02-25</time>
            &middot;
            761
            words
            &middot;
            4
            minute read
        </div>

        
        
            
            
            <div class="article-category">
                <i class="fa fa-folder"></i>
                
                <a class="article-category-link" href="http://www.yourdomain.com/categories/orchestration">Orchestration</a>
                
                
            </div>
            
        

        
            
            
            <div class="article-category">
                <i class="fa fa-tags"></i>
                
                <a class="article-category-link" href="http://www.yourdomain.com/tags/ansible">Ansible</a>
                
                
            </div>
            
        
    </div>
</header>

            <div class="article-entry" itemprop="articleBody">
                

<h1 id="motivation:9a0c5c802295a374fed89e0c79bc5395">Motivation</h1>

<p>Managing a one or two machines is a fairly easy task. Installing software, managing users, mounting network drives, etc. can be done by manually spawning a shell to each machine and running whatever commands we need to on each machine individually. While it doesn&rsquo;t seem too bad for a couple machines, what if we want to manage many machines? If I have to gather information about all 1000 of my machines, I don&rsquo;t want to have to manually spawn a shell in each. This would be unrealistic.</p>

<p>Luckily, there are nice people out there that work on management and orchestration tools. Ansible is one such tool.</p>

<h1 id="installation:9a0c5c802295a374fed89e0c79bc5395">Installation</h1>

<p>The official install doc is <a href="http://docs.ansible.com/ansible/intro_installation.html">here</a>.</p>

<pre><code>$ brew install ansible
</code></pre>

<h1 id="basics:9a0c5c802295a374fed89e0c79bc5395">Basics</h1>

<h2 id="creating-a-hosts-file:9a0c5c802295a374fed89e0c79bc5395">Creating a hosts file</h2>

<p>The hosts file is where you put all the machines you are interested in working with. You need two things: group name and address. You can use IP addresses or use DNS. Here&rsquo;s an example:</p>

<pre><code>[mygroupname]
192.168.1.1
192.168.1.2
example.com

[someothergroup]
192.168.1.1
some.other.machine.com
</code></pre>

<p>Three machines are all associated with the &ldquo;mygroupname&rdquo; group. Two other machines are associated with &ldquo;someothergroup&rdquo; group.</p>

<h2 id="how-to-we-setup-access-to-these-machines:9a0c5c802295a374fed89e0c79bc5395">How to we setup access to these machines?</h2>

<p>We need to make sure a couple of things are in place before we can get started running commands. First, we need to have an account on each of the machines. If you&rsquo;re setting things up for the first time, you might want to put an account with the same name on each machine you want access to. If you&rsquo;re trying to connect to an existing system that doesn&rsquo;t have an account on each machine, you&rsquo;re going to have to get a little more involved with the settings. For example, you might have to ammend your hosts file like such.</p>

<pre><code>[mygroupname]
192.168.1.1 ansible_ssh_user=someuser ansible_ssh_private_key_file=/path/to/key.pem
192.168.1.2 ansible_ssh_user=someotheruser ansible_ssh_pass=password
example.com ansible_ssh_user=joe ansible_ssh_pass=password

...
</code></pre>

<p>What I like to do is setup my <code>~/.ssh/config</code> like such:</p>

<pre><code>Host *.domain.com
  User admin
  IdentityFile ~/.ssh/admin.pem
</code></pre>

<p>If all my machines are subdomains of domain.com, whenever I ssh (and whenever ansible does) it will use the user <code>admin</code> and the private key <code>~/.ssh/admin.pem</code>. This way I don&rsquo;t have to specify my username in my hosts file. Another great option is to use ansible group variables. You can learn about the hosts file (inventory file) and connecting to your machines <a href="http://docs.ansible.com/ansible/intro_inventory.html">here</a>.</p>

<h2 id="our-first-command:9a0c5c802295a374fed89e0c79bc5395">Our first command</h2>

<p>Let&rsquo;s run ansible with the command module to <code>echo hello</code> on all of our machines.</p>

<pre><code>$ ansible mygroupname -i hosts -m command -a &quot;echo hello&quot;
</code></pre>

<p>If all goes well, you should get something like this:</p>

<pre><code>192.168.1.1 | SUCCESS | rc=0 &gt;&gt;
hello

192.168.1.2 | SUCCESS | rc=0 &gt;&gt;
hello

example.com | SUCCESS | rc=0 &gt;&gt;
hello
</code></pre>

<p>Notice in our command to ansible <code>mygroupname</code> was the first argument. This argument tells ansible which group we wish to execute our ansible command on. If we instead did <code>ansible someothergroup ...</code> it would run on the machines listed in the other group. If you want to run the command on all the groups, you specify <code>all</code> as the group.</p>

<h2 id="getting-the-uptime-of-each-machine:9a0c5c802295a374fed89e0c79bc5395">Getting the uptime of each machine</h2>

<p>Here&rsquo;s an example of a command that&rsquo;s a little more useful</p>

<pre><code>$ ansible somegroup -i hosts -m command -a &quot;uptime&quot;

192.168.1.1 | SUCCESS | rc=0 &gt;&gt;
 22:56:54 up 2 days, 21:28,  1 user,  load average: 0.03, 0.03, 0.05

192.168.1.2 | SUCCESS | rc=0 &gt;&gt;
 22:56:54 up 2 days, 21:28,  1 user,  load average: 0.00, 0.01, 0.05

192.168.1.3 | SUCCESS | rc=0 &gt;&gt;
 22:56:54 up 2 days, 21:28,  1 user,  load average: 0.00, 0.01, 0.05

192.168.1.4 | SUCCESS | rc=0 &gt;&gt;
 22:56:54 up 2 days, 21:28,  1 user,  load average: 0.03, 0.03, 0.05
</code></pre>

<h2 id="modules:9a0c5c802295a374fed89e0c79bc5395">Modules</h2>

<p>Ansible has a ton of modules that are useful to common orchestration and management tasks. <a href="http://docs.ansible.com/ansible/list_of_all_modules.html">Here</a> is a potentially intimidating list of them.</p>

<p>Modules are awesome. They are very powerful and aren&rsquo;t going to be covered in this post. Modules can be used on the command line, but most examples of them will be within ansible plays. Another feature of ansible is <em>plays</em>. Using ansible <em>plays</em> within <code>anisble-playbook</code> will be a topic for another post. The offical docs are <a href="http://docs.ansible.com/ansible/playbooks.html">here</a>.</p>

<p>Here are some that I&rsquo;ve found useful.</p>

<table>
<thead>
<tr>
<th>Module Name</th>
<th>Summary</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="http://docs.ansible.com/ansible/apt_key_module.html">apt_key</a></td>
<td>Add or remove apt key</td>
</tr>

<tr>
<td><a href="http://docs.ansible.com/ansible/apt_repository_module.html">apt_repository</a></td>
<td>Add or remove apt repository</td>
</tr>

<tr>
<td><a href="http://docs.ansible.com/ansible/apt_module.html">apt</a></td>
<td>Manage apt packages</td>
</tr>

<tr>
<td><a href="http://docs.ansible.com/ansible/user_module.html">user</a></td>
<td>Manage user accounts</td>
</tr>

<tr>
<td><a href="http://docs.ansible.com/ansible/authorized_key_module.html">authorized_key</a></td>
<td>Add or remove ssh keys for user accounts</td>
</tr>

<tr>
<td><a href="http://docs.ansible.com/ansible/mount_module.html">mount</a></td>
<td>Control mount points</td>
</tr>

<tr>
<td><a href="http://docs.ansible.com/ansible/file_module.html">file</a></td>
<td>Set attributes of files</td>
</tr>
</tbody>
</table>

<h1 id="cheat-sheet:9a0c5c802295a374fed89e0c79bc5395">Cheat Sheet</h1>

<table>
<thead>
<tr>
<th>Objective</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Uptime</td>
<td><code>ansible all -i hosts -m command -a &quot;uptime&quot;</code></td>
</tr>

<tr>
<td>Who&rsquo;s logged in?</td>
<td><code>ansible all -i hosts -m command -a &quot;who&quot;</code></td>
</tr>
</tbody>
</table>

<h1 id="resources-that-helped-me:9a0c5c802295a374fed89e0c79bc5395">Resources That Helped Me</h1>

<ul>
<li><a href="https://youtu.be/xew7CMkL7jY">Watch this first</a></li>
<li><a href="https://youtu.be/2jXHxkLBOHg">Watch this second</a></li>
</ul>

            </div>
            <footer class="article-footer">
    <a data-url="http://www.yourdomain.com/2016/02/25/intro-to-ansible" data-id="9a0c5c802295a374fed89e0c79bc5395" class="article-share-link">
        Share
    </a>
    
</footer>

        </div>

        
<nav id="article-nav">
    
    <a href="http://www.yourdomain.com/2016/02/24/getting-set-up-with-hugo" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Older
      </strong>
      <div class="article-nav-title">Getting Set Up With Hugo</div>
    </a>
    

    
    <a href="http://www.yourdomain.com/2016/02/26/intro-to-ansible-playbook" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Newer
      </strong>
      <div class="article-nav-title">Intro to Ansible Playbook</div>
    </a>
    
</nav>


    </article>
    <section id="comments">
        <div id="disqus_thread">
            
        </div>
    </section>

</section>

	    <aside id="sidebar">
    
<div class="widget-wrap">
    <h3 class="widget-title">
        Recents
    </h3>
    <div class="widget">
        <ul id="recent-post">
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://www.yourdomain.com/2016/02/26/intro-to-ansible-playbook" class="thumbnail">
                    
                        
                        <span style="background-image:url(http://www.yourdomain.com/banners/ansible-playbook.jpg)" alt="Intro to Ansible" class="thumbnail-image"></span>
                        
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://www.yourdomain.com/categories/orchestration">
                        Orchestration
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://www.yourdomain.com/2016/02/26/intro-to-ansible-playbook" class="title">Intro to Ansible Playbook</a></p>
                    <p class="item-date">
                        <time datetime="2016-02-26 17:18:47 -0600 CST" itemprop="datePublished">2016-02-26</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://www.yourdomain.com/2016/02/25/intro-to-ansible" class="thumbnail">
                    
                        
                        <span style="background-image:url(http://www.yourdomain.com/banners/ansible-logo.png)" alt="Intro to Ansible" class="thumbnail-image"></span>
                        
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://www.yourdomain.com/categories/orchestration">
                        Orchestration
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://www.yourdomain.com/2016/02/25/intro-to-ansible" class="title">Intro to Ansible</a></p>
                    <p class="item-date">
                        <time datetime="2016-02-25 17:32:58 -0600 CST" itemprop="datePublished">2016-02-25</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://www.yourdomain.com/2016/02/24/getting-set-up-with-hugo" class="thumbnail">
                    
                        
                        <span style="background-image:url(http://www.yourdomain.com/banners/desk.jpg)" alt="Intro to Ansible" class="thumbnail-image"></span>
                        
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://www.yourdomain.com/categories/web">
                        Web
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://www.yourdomain.com/2016/02/24/getting-set-up-with-hugo" class="title">Getting Set Up With Hugo</a></p>
                    <p class="item-date">
                        <time datetime="2016-02-24 20:41:45 -0600 CST" itemprop="datePublished">2016-02-24</time>
                    </p>
                </div>
            </li>
            
        </ul>
    </div>
</div>


    


<div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                <a class="category-list-link" href="http://www.yourdomain.com/categories/orchestration">
                    orchestration
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="http://www.yourdomain.com/categories/web">
                    web
                </a>
                <span class="category-list-count">1</span>
            </li>
            
        </ul>
    </div>
</div>



    


<div class="widget-wrap">
    <h3 class="widget-title">
        Tags
    </h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                <a class="category-list-link" href="http://www.yourdomain.com/tags/ansible">
                    ansible
                </a>
                <span class="category-list-count">2</span>
            </li>
            
            <li class="category-list-item">
                <a class="category-list-link" href="http://www.yourdomain.com/tags/hugo">
                    hugo
                </a>
                <span class="category-list-count">1</span>
            </li>
            
        </ul>
    </div>
</div>



    


<div class="widget-wrap">
    <h3 class="widget-title">
        Tag cloud
    </h3>
    <div class="widget tagcloud">
        
        <a href="http://www.yourdomain.com/tags/ansible" style="font-size: 12px;">ansible</a>
        
        <a href="http://www.yourdomain.com/tags/hugo" style="font-size: 12px;">hugo</a>
        
    </div>
</div>




    <div id="toTop" class="fa fa-chevron-up"></div>
</aside>

	</div>
</div>

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016
      
    </div>
  </div>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://www.yourdomain.com/fancybox/jquery.fancybox.pack.js"></script>
<script src="http://www.yourdomain.com/js/script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- MathJax -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
